# WiFi 連線錯誤除錯說明

## 錯誤訊息
```
NameError: name 'wifi' isn't defined
```

## 問題原因

您提供的程式碼有幾個問題：

### 1. **程式碼結構混亂**
您把 `wifi.py` 模組的定義和主程式碼混在一起了。正確的做法是：
- `wifi.py` - 只包含 WiFi 相關的函式定義
- `wifi_connect.py` - 重新導出 `wifi` 模組的功能
- `main.py` 或測試檔案 - 只包含使用這些模組的程式碼

### 2. **導入語句位置錯誤**
在您提供的程式碼中，`import wifi_connect as wifi` 這一行出現在模組定義之後，而且可能縮排不正確。

### 3. **在 REPL 中執行時的注意事項**
如果您是在 MicroPython REPL 中逐行輸入程式碼，需要確保：
- 先確保 `wifi.py` 和 `wifi_connect.py` 已經上傳到 Pico
- 然後再執行 `import wifi_connect as wifi`
- 最後才使用 `wifi.connect()` 等函式

## 解決方案

### 方案 1：使用正確的檔案結構（推薦）

確保您的檔案結構如下：

```
pico/
├── wifi.py          # WiFi 函式定義
├── wifi_connect.py  # 重新導出模組
└── main.py          # 主程式（或 test_wifi.py）
```

**main.py 或 test_wifi.py 的內容應該是：**
```python
import wifi_connect as wifi

# 嘗試連線 WiFi
wifi.connect()

# 顯示 IP
print("IP:", wifi.get_ip())

# 測試網路連線
if wifi.test_internet():
    print("已連接到網際網路")
else:
    print("無法連接到網際網路")
```

### 方案 2：在 REPL 中正確執行

如果您要在 REPL 中測試，請按照以下順序：

1. **確保檔案已上傳**
   - 確認 `wifi.py` 和 `wifi_connect.py` 已經在 Pico 上

2. **在 REPL 中執行：**
   ```python
   >>> import wifi_connect as wifi
   >>> wifi.connect()
   >>> print("IP:", wifi.get_ip())
   >>> if wifi.test_internet():
   ...     print("已連接到網際網路")
   ... else:
   ...     print("無法連接到網際網路")
   ```

### 方案 3：檢查檔案是否存在

如果仍然出現錯誤，請檢查：

1. **確認檔案存在：**
   ```python
   >>> import os
   >>> os.listdir()
   # 應該看到 'wifi.py' 和 'wifi_connect.py'
   ```

2. **測試導入：**
   ```python
   >>> import wifi
   >>> import wifi_connect
   >>> import wifi_connect as wifi
   >>> wifi.connect
   # 應該顯示 <function connect at ...>
   ```

## 常見錯誤範例

### ❌ 錯誤寫法 1：把所有程式碼放在一個檔案
```python
# 錯誤：不要這樣寫
def connect():
    # ... WiFi 連線函式 ...

def get_ip():
    # ... 取得 IP 函式 ...

import wifi_connect as wifi  # ❌ 這行不應該在這裡
wifi.connect()
```

### ❌ 錯誤寫法 2：縮排錯誤
```python
def test_internet():
    return True

    import wifi_connect as wifi  # ❌ 縮排錯誤，這行不會執行
    wifi.connect()
```

### ✅ 正確寫法：分開檔案
```python
# wifi.py
def connect():
    # ...

# main.py
import wifi_connect as wifi
wifi.connect()
```

## 測試步驟

1. **上傳所有檔案到 Pico：**
   - `wifi.py`
   - `wifi_connect.py`
   - `test_wifi.py`（或 `main.py`）

2. **執行測試檔案：**
   ```python
   >>> exec(open('test_wifi.py').read())
   ```

   或使用 Thonny 等 IDE 直接執行檔案。

## 如果問題仍然存在

請檢查：
1. ✅ `wifi.py` 檔案是否完整且沒有語法錯誤
2. ✅ `wifi_connect.py` 檔案是否存在且正確
3. ✅ 所有檔案都在同一個目錄下
4. ✅ MicroPython 版本是否支援這些功能

